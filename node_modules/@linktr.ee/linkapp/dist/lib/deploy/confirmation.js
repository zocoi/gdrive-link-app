import * as p from '@clack/prompts';
import { DeploymentCancelledError } from '../utils/errors.js';
import { displayFileList } from '../utils/formatters.js';
import { writeLine } from '../utils/output.js';
/**
 * Displays the files that will be uploaded and prompts the user for confirmation.
 *
 * @param context - Deployment context
 * @param artifacts - Prepared artifacts
 * @returns true if user confirms, false otherwise
 * @throws DeploymentCancelledError if user cancels deployment
 */
export async function confirmDeployment(context, artifacts) {
    // Skip confirmation if requested
    if (context.options.skipConfirm) {
        return;
    }
    // Show files to upload
    displayFileList(artifacts.packedFiles, 'Files to upload:');
    // Prompt for confirmation
    writeLine();
    const shouldDeploy = await p.confirm({
        message: `Deploy to ${context.env}?`,
        initialValue: true,
    });
    if (p.isCancel(shouldDeploy) || !shouldDeploy) {
        throw new DeploymentCancelledError();
    }
}
//# sourceMappingURL=confirmation.js.map