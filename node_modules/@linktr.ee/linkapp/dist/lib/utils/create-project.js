import { cpSync, existsSync, mkdirSync, readFileSync, writeFileSync } from 'node:fs';
import { join, dirname } from 'node:path';
import { fileURLToPath } from 'node:url';
const __filename = fileURLToPath(import.meta.url);
const __dirname = dirname(__filename);
function toTitleCase(str) {
    return str
        .split('-')
        .map((word) => word.charAt(0).toUpperCase() + word.slice(1))
        .join(' ');
}
export async function createProject(options) {
    const { projectName, projectPath, template } = options;
    const templatesDir = join(__dirname, '..', '..', '..', 'templates');
    const templatePath = join(templatesDir, template);
    const sharedPath = join(templatesDir, 'shared');
    if (!existsSync(templatePath)) {
        throw new Error(`Template ${template} not found`);
    }
    // Create project directory
    mkdirSync(projectPath, { recursive: true });
    // Copy template files
    cpSync(templatePath, projectPath, { recursive: true });
    // Copy shared files
    if (existsSync(sharedPath)) {
        cpSync(sharedPath, projectPath, { recursive: true });
    }
    // Replace placeholders
    const projectTitle = toTitleCase(projectName);
    const placeholders = {
        '{{PROJECT_NAME}}': projectName,
        '{{PROJECT_TITLE}}': projectTitle,
        '{{AUTHOR_NAME}}': 'Your Name',
    };
    replaceInFile(join(projectPath, 'package.json'), placeholders);
    replaceInFile(join(projectPath, 'linkapp.config.ts'), placeholders);
    replaceInFile(join(projectPath, 'README.md'), placeholders);
}
function replaceInFile(filePath, placeholders) {
    if (!existsSync(filePath))
        return;
    let content = readFileSync(filePath, 'utf-8');
    for (const [placeholder, value] of Object.entries(placeholders)) {
        content = content.replaceAll(placeholder, value);
    }
    writeFileSync(filePath, content, 'utf-8');
}
//# sourceMappingURL=create-project.js.map