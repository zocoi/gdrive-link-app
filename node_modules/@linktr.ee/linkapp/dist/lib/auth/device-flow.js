import { errors, Issuer, } from "openid-client";
export async function initiateDeviceFlow(config) {
    const { domain, client_id, audience } = config;
    const auth0Issuer = await Issuer.discover(domain);
    const client = new auth0Issuer.Client({
        client_id,
        token_endpoint_auth_method: "none",
    });
    return await client.deviceAuthorization({ scope: "", audience });
}
export async function pollAccessToken(handle) {
    try {
        return await handle.poll();
    }
    catch (err) {
        if (err instanceof errors.OPError) {
            throw new Error(err.error_description ?? err.message);
        }
        throw err;
    }
}
//# sourceMappingURL=device-flow.js.map