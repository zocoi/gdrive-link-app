import { initializeDeployment, runPreflightChecks, prepareDeploymentArtifacts, confirmDeployment, executeDeployment, } from '../lib/deploy/deploy-phases.js';
import { displayDeploymentSuccess, displayDeploymentError, } from '../lib/deploy/deploy-output.js';
import { DeploymentCancelledError } from '../lib/deploy/deploy-utils.js';
/**
 * Deploy command - builds and uploads a LinkApp to the Linktree platform.
 *
 * This command orchestrates the entire deployment process:
 * 1. Initialize deployment context (auth, config, LinkApp ID)
 * 2. Run preflight checks (build, validation)
 * 3. Prepare artifacts (manifests, packed files)
 * 4. Confirm deployment with user
 * 5. Execute deployment (upload to API)
 * 6. Display results
 *
 * @param options - Deployment options
 */
export async function deployCommand(options) {
    try {
        const context = await initializeDeployment(options);
        await runPreflightChecks(context);
        const artifacts = await prepareDeploymentArtifacts(context);
        await confirmDeployment(context, artifacts);
        const result = await executeDeployment(context, artifacts);
        displayDeploymentSuccess(context, result);
    }
    catch (error) {
        if (error instanceof DeploymentCancelledError) {
            displayDeploymentError(error);
            return;
        }
        displayDeploymentError(error);
        process.exit(1);
    }
}
//# sourceMappingURL=deploy.js.map