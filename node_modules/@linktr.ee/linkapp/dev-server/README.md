# Development Server Setup

This directory contains a custom Rsbuild-based development server for previewing LinkApp components with multiple routes and iframe embeds.

## Structure

```
dev-server/
├── index.html              # Root preview page entry
├── rsbuild.config.ts      # Rsbuild configuration
├── server.ts              # TypeScript server launcher
├── preview/
│   ├── main.tsx          # Preview page React entry
│   └── Preview.tsx       # Preview UI component
├── classic/
│   ├── index.html        # Classic layout entry
│   └── main.tsx          # Classic React entry
└── featured/
    ├── index.html        # Featured layout entry
    └── main.tsx          # Featured React entry
```

## Available Routes

- **`http://localhost:3000/`** - Preview page with drawer/modal and iframes
- **`http://localhost:3000/classic/`** - Classic layout (renders `app/classic.tsx`)
- **`http://localhost:3000/featured/`** - Featured layout (renders `app/featured.tsx`)

## Features

### Preview Page (`/`)
- Interactive drawer/modal containing an iframe to `/classic`
- Inline iframe displaying `/featured`
- Clean UI with route information and controls

### Classic & Featured Routes
- Both routes render their respective components from `../app/`
- Wrapped in `layout.tsx` with `globals.css` imported
- Original `1-demo` files remain unchanged

## Running the Server

```bash
npm run dev:preview
```

This command uses `tsx` to run the TypeScript server script, which programmatically starts Rsbuild with the custom configuration.

## Technical Details

### Multi-Page Application (MPA)
The setup uses Rsbuild's MPA capability with multiple HTML entry points:
- Root: `index.html` → Preview page
- `/classic/`: `classic/index.html` → Classic layout
- `/featured/`: `featured/index.html` → Featured layout

### Imports
All entry points import from the original `app/` directory without modifying any existing files:
- `@/app/layout` - Root layout component
- `@/app/classic` - Classic component
- `@/app/featured` - Featured component
- `@/app/globals.css` - Global styles

### Port Configuration
Server runs on port 3000 with `strictPort: true` to match requirements.

## Development Workflow

1. Run `npm run dev:preview`
2. Open `http://localhost:3000/` in your browser
3. Use the "Open Classic Preview" button to see the drawer/modal
4. The featured layout is always visible in the inline iframe
5. Navigate directly to `/classic/` or `/featured/` to view layouts standalone

## First Principles Design

This implementation follows a clean separation of concerns:
- Original app files (`1-demo/app/*`) remain untouched
- New dev-server directory contains all preview infrastructure
- Uses Rsbuild's native MPA support for clean routing (no client-side router)
- TypeScript throughout for type safety
- Programmatic server creation for flexibility
